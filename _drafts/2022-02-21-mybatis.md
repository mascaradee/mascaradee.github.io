---
layout: post
date: 2022-02-22 07:59:00 +0900
title: '[mybatis] basic'
categories:
  - mybatis
tags:
  - mybatis  -
---

* Kramdown table of contents
{:toc .toc}

## 내가 아는 마이바티스란

쿼리를 쓰는 xml 파일로 자바에서 파라미터를 전달 받아 쿼리를 실행하게 도와주고 그 결과를 자바로 전달해 주는 무엇!



## 마이바티스란?

자바 퍼시스턴스 프레임워크의 하나로 XML 서술자나 어노테이션을 사용하여 저장 프로시저나 SQL문으로 객체를 연결시킨다.
마이바티스는 ibatis 3.0의 포크이다.

SQL 매퍼

마이바티스는 SQL, 저장프로시저 그리고 몇가지 고급 매핑을 지원하는 퍼시스턴스 프레임워크로
JDBC로 처리하는 상당부분의 코드와 ???
파라미터 설정및 결과 매핑을 대신해준다.
마이바티스는 데이터베이스 레코드에 원시타입과 Map 인터페이스 그리고 자바 POJO 를 설정해서 매핑하기 위해 XML과 애노테이션을 사용할 수 있다.

[마이바티스 공식](https://mybatis.org/mybatis-3/ko/index.html)


### 퍼시스턴스 프레임워크

지속성 프레임워크(Persistence Framework)는 데이터의 저장, 조회, 변경, 삭제를 다루는 클래스 및 설정 파일들의 집합이다.
지속성 프레임워크를 사용하면 JDBC 프로그래밍의 복잡함이나 번거로움 없이 간단한 작업만으로 데이터베이스와 연동되는 시스템을 빠르게 개발할 수 있으며 안정적인 구동도 보장한다.



## 구조

### properties

db 접속 정보 설정파일

egovframework/egovProps/configv.properties

```
xxx.mysql.DriverClassName=net.sf.log4jdbc.DriverSpy
xxx.mysql.Url=jdbc:log4jdbc:mysql://128.00.0.000:3306/ourdb
xxx.mysql.UserName = ourdb
xxx.mysql.Password = 1234!
```

egovframework/spring/context-datasource.xml

```
<bean id="xxx.dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${xxx.mysql.DriverClassName}"/>
    <property name="url" value="${xxx.mysql.Url}"/>
    <property name="username" value="${xxx.mysql.UserName}"/>
    <property name="password" value="${xxx.mysql.Password}"/>
</bean>
```

egovframework/spring/context-mapper.xml

```
<bean id="xxx.sqlSession" class="org.mybatis.spring.SqlSessionFactoryBean">
  <property name="dataSource" ref="xxx.dataSource"/>
  <property name="configLocation" value="classpath:/egovframework/mapper/config/mapper-config.xml" />

  <property name="mapperLocations">
    <list>
      <value>classpath:/egovframework/mapper/com/**/*.xml</value>
    </list>
  </property>
</bean>
```

egovframework/mapper/config/mapper-config.xml:22
```
<settings>
  <!-- 전통적인 데이터베이스 컬럼명 형태인 A_COLUMN을 CamelCase형태의 자바 프로퍼티명 형태인 aColumn으로 자동으로 매핑하도록 함 -->
  <setting name="mapUnderscoreToCamelCase" value="true"></setting>
  <!--  파라미터에 Null 값이 있을 경우 에러 처리 -->
  <setting name="jdbcTypeForNull" value="VARCHAR"></setting>
  <setting name="logImpl" value="LOG4J2"/>
</settings>
```
